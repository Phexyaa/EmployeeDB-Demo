<Window x:Class="DesktopApp.MainWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:local="clr-namespace:DesktopApp"
		xmlns:mwvm="DesktopApp"
		xmlns:globals="clr-namespace:Shared.Global;assembly=Shared"
		mc:Ignorable="d"
		Title="{Binding Title}"
		Height="450"
		Width="800"
		Background="#FF2A1B1B">
	<Window.DataContext>
		<local:MainWindowViewModel />
	</Window.DataContext>
	<Window.Resources>
		<local:MainWindowViewModel x:Key="MainWindowViewModel"/>
	</Window.Resources>
	<Grid x:Name="MainGrid">
		<Grid.RowDefinitions>
			<RowDefinition Height="30" />
			<RowDefinition Height="1*" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition />
			<ColumnDefinition Width="3*" />
			<ColumnDefinition />
		</Grid.ColumnDefinitions>
		<DataGrid x:Name="ResultsDataGrid"
				  ItemsSource="{Binding Employees}"
				  Margin="5,0,5,5"
				  Width="auto"
				  Height="auto"
				  Grid.Row="1"
				  Grid.ColumnSpan="3"
				  AutoGenerateColumns="False"
				  CanUserAddRows="False"
				  AlternatingRowBackground="LightGray">
			<DataGrid.Resources>
				<DataTemplate x:Key="HireDateTemplate">
					<DatePicker IsHitTestVisible="False" 
								SelectedDate="{Binding HireDate}" 
								IsManipulationEnabled="False"
								Width="150"/>
				</DataTemplate>
			</DataGrid.Resources>
			<DataGrid.Columns>
				<DataGridTextColumn Header="First Name"
									Binding="{Binding FirstName}" />
				<DataGridTextColumn Header="Last Name"
									Binding="{Binding LastName}" />
				<DataGridTextColumn Header="Age"
									Binding="{Binding Age}" />
				<DataGridTextColumn Header="Salary"
									Binding="{Binding Salary, StringFormat=C}"/>
				<DataGridTemplateColumn Header="Hire Date"
										CellTemplate="{StaticResource HireDateTemplate }" />
				<DataGridTextColumn Width="1*" />
			</DataGrid.Columns>
		</DataGrid>
		<Grid x:Name="TopRowCenterGrid"
			  Grid.Column="1"
			  VerticalAlignment="Center"
			  MinWidth="480">
			<Grid.ColumnDefinitions>
				<ColumnDefinition />
				<ColumnDefinition />
			</Grid.ColumnDefinitions>
			<Grid x:Name="CriteriaGrid"
				  VerticalAlignment="Center"
				  Margin="2,0,2,0"
				  Grid.ColumnSpan="2"
				  HorizontalAlignment="Left">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition />
				</Grid.ColumnDefinitions>
				<Label x:Name="CriteraLabel"
					   Content="{Binding CriteriaLabelText}"
					   HorizontalAlignment="Left"
					   Foreground="White"
					   VerticalAlignment="Center"
					   Margin="0,0,5,0" />
				<ComboBox x:Name="CriteriaSelect"
						  VerticalAlignment="Center"
						  Grid.Column="1"
						  Width="150"
						  HorizontalAlignment="Left"
						  ItemsSource="{Binding SearchCriteriaToString}"
						  SelectedValue="{Binding ElementName=CriteriaGrid, Path=DataContext.SelectedSearchCriteria, Mode=TwoWay}"
						  DisplayMemberPath="Value"
						  SelectedValuePath="Key">
					<ComboBox.DataContext>
						<globals:Defaults />
					</ComboBox.DataContext>
				</ComboBox>
			</Grid>
			<Grid x:Name="SearchGrid"
				  VerticalAlignment="Center"
				  Width="NaN"
				  Grid.Column="1"
				  HorizontalAlignment="Left">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="2*" />
					<ColumnDefinition Width="1*" />
				</Grid.ColumnDefinitions>
				<TextBox x:Name="SearchBox"
						 TextWrapping="Wrap"
						 VerticalAlignment="Top"
						 Height="25"
						 MinWidth="150" />
				<Button x:Name="SearchButton"
						Grid.Column="1"
						Command="{Binding SearchCommand}"
						CommandParameter="{Binding Text, ElementName=SearchBox}"
						Background="#FF5D4949"
						VerticalAlignment="Center"
						Height="25"
						Width="25">
					<Image x:Name="SearchIcon"
						   Height="16"
						   Width="16"
						   Source="/Assets/search.png"
						   Panel.ZIndex="4"
						   HorizontalAlignment="Center"
						   VerticalAlignment="Center"
						   d:LayoutOverrides="LeftPosition, RightPosition, TopPosition, BottomPosition" />
				</Button>
			</Grid>
		</Grid>
		<Grid x:Name="LinkStatusGrid"
			  HorizontalAlignment="Right"
			  VerticalAlignment="Center"
			  Margin="0,2.5,2.5,0"
			  Width="20"
			  Height="20"
			  Grid.Column="2">
			<Image x:Name="LinkStatusIcon"
				   Source="{Binding ConnectionStatusIcon}"
				   Width="16"
				   Height="16"
				   MinWidth="16"
				   MinHeight="16"
				   Panel.ZIndex="1" />
			<Rectangle x:Name="LinkIconBackground"
					   Fill="{Binding ConnectionStatusBackground}"
					   Stroke="Black"
					   RadiusX="5"
					   RadiusY="5"
					   StrokeThickness="1" />
		</Grid>
	</Grid>
</Window>
